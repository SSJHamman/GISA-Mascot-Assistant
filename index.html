<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SYNTRAX — Classified Ops Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:'Roboto Mono', monospace;background:#05060a;color:#c9d1d9;display:flex;flex-direction:column;height:100vh;}
  header{padding:12px 24px;background:#0c0d12;border-bottom:3px solid #1f2225;display:flex;justify-content:space-between;align-items:center;}
  .brand{font-weight:700;font-size:26px;color:#58a6ff;letter-spacing:2px;}
  #clock{font-weight:400;font-size:16px;color:#8b949e;}
  .dashboard{display:flex;flex:1;overflow:hidden;}
  .sidebar{width:220px;background:#0d0e14;border-right:2px solid #21262d;padding:20px;display:flex;flex-direction:column;}
  .sidebar h3{color:#58a6ff;font-size:14px;margin-bottom:10px;letter-spacing:1px;text-transform:uppercase;}
  .sidebar button{margin:5px 0;padding:8px;border:none;border-radius:4px;background:#161b22;color:#c9d1d9;cursor:pointer;text-align:left;}
  .main-content{flex:1;display:grid;grid-template-rows:1fr 1fr;gap:12px;padding:20px;overflow:auto;}
  .panel{background:#131516;border:1px solid #21262d;border-radius:6px;padding:16px;overflow:auto;display:flex;flex-direction:column;}
  .panel h3{font-size:13px;text-transform:uppercase;color:#8b949e;margin-bottom:8px;letter-spacing:1px;}
  .panel canvas{flex:1;}
  .log{font-family:'Roboto Mono', monospace;font-size:12px;line-height:1.3;flex:1;overflow-y:auto;color:#c9d1d9;}
  .console{display:flex;margin:0 20px 20px 20px;}
  #cmd{flex:1;padding:8px;border-radius:4px;border:1px solid #30363d;background:#0b0c0e;color:#c9d1d9;font-family:'Roboto Mono', monospace;}
</style>
</head>
<body>
<header>
  <div class="brand">SYNTRAX OPS</div>
  <div id="clock"></div>
</header>
<div class="dashboard">
  <div class="sidebar">
    <h3>System Nodes</h3>
    <button onclick="togglePanel('weather')">Weather Control</button>
    <button onclick="togglePanel('seismic')">Seismic Monitoring</button>
    <button onclick="togglePanel('orbital')">Orbital Surveillance</button>
    <button onclick="togglePanel('log')">Event Log</button>
  </div>
  <div class="main-content">
    <section class="panel" id="weatherPanel">
      <h3>Weather Node</h3>
      <canvas id="weatherChart" height="100"></canvas>
      <div class="status" id="weatherMeta">--</div>
    </section>
    <section class="panel" id="seismicPanel">
      <h3>Seismic Node</h3>
      <canvas id="quakeChart" height="100"></canvas>
      <div class="status" id="quakeMeta">--</div>
    </section>
    <section class="panel" id="orbitalPanel">
      <h3>Orbital Node</h3>
      <div class="status" id="issBox">--</div>
    </section>
    <section class="panel" id="logPanel">
      <h3>Core Event Log</h3>
      <div class="log" id="log"></div>
    </section>
  </div>
</div>
<div class="console">
  <input id="cmd" autocomplete="off" spellcheck="false" placeholder="ENTER COMMAND" />
</div>
<script>
(() => {
const $=s=>document.querySelector(s);
const state={weather:null,quakes:[],iss:null};
const logEl=$('#log');
const clock=$('#clock');
function ts(){return new Date().toLocaleTimeString();}
function appendLog(msg){const d=document.createElement('div');d.textContent=`[${ts()}] ${msg}`;logEl.appendChild(d);logEl.scrollTop=logEl.scrollHeight;}
setInterval(()=>clock.textContent=new Date().toLocaleTimeString(),1000);

function togglePanel(name){
  ['weatherPanel','seismicPanel','orbitalPanel','logPanel'].forEach(id=>{
    $(id).style.display=id.startsWith(name)?'block':'none';
  });
}

async function fetchWeather(){
  try{
    const res=await fetch('https://api.open-meteo.com/v1/forecast?latitude=39.924&longitude=-83.808&hourly=temperature_2m');
    const data=await res.json();
    state.weather=data.hourly.temperature_2m.slice(0,12);
    new Chart($('#weatherChart'),{type:'line',data:{labels:[...Array(12).keys()],datasets:[{label:'°C',data:state.weather}]}});
    $('#weatherMeta').textContent=`Active | Temp: ${state.weather[0]}°C`;
    appendLog('Weather node active');
  }catch(e){appendLog('Weather node error');}
  setTimeout(fetchWeather,60000);
}

async function fetchQuakes(){
  try{
    const res=await fetch('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson');
    const data=await res.json();
    state.quakes=data.features.slice(0,5).map(f=>`M${f.properties.mag} @ ${f.properties.place}`);
    new Chart($('#quakeChart'),{type:'bar',data:{labels:state.quakes.map((_,i)=>i+1),datasets:[{label:'Magnitude',data:data.features.slice(0,5).map(f=>f.properties.mag)}]}});
    $('#quakeMeta').textContent=state.quakes.join('; ');
    appendLog('Seismic node active');
  }catch(e){appendLog('Seismic node error');}
  setTimeout(fetchQuakes,60000);
}

async function fetchISS(){
  try{
    const res=await fetch('https://api.wheretheiss.at/v1/satellites/25544');
    const data=await res.json();
    state.iss=data;
    $('#issBox').textContent=`Lat:${data.latitude.toFixed(2)} Lon:${data.longitude.toFixed(2)}`;
    appendLog('Orbital node updated');
  }catch(e){appendLog('Orbital node error');}
  setTimeout(fetchISS,15000);
}

$('#cmd').addEventListener('keydown',e=>{
  if(e.key==='Enter'){
    appendLog('CMD>'+e.target.value);
    e.target.value='';
  }
});

fetchWeather();
fetchQuakes();
fetchISS();
})();
</script>
</body>
</html>
